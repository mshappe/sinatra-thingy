form.form-horizontal#search-form[method="post" action="#"]
  fieldset
    .control-group
      label.control-label[for="search"] Search Your Twitter Stream
      .controls
        input[name="twitter-search" id="search" type="text" class="input-xxlarge"]
    .control-group
      label.control-label[for="geo"] Restrict to within 50mi of your current location?
      .controls
        input[name="geo" id="geo" type="checkbox" value="0" ]
    .control-group
      .controls
        button.btn[type="submit"] Submit

#results

javascript:
  $(function() {
    var options = { enableHighAccuracy: true, timeout: 5000, maximumAge: 0 }
    function nav_success(pos) { window.loc = pos };
    function nav_failure(err) { $('#results').html("<p>Unable to get location: " + err + " </p>") };
    navigator.geolocation.getCurrentPosition(nav_success, nav_failure, options);
  });

  function get_geo() {
    if ($('#geo').is(':checked')) {
      return window.loc;
    } else {
      return null;
    }
  };

  $('#search-form').submit(function() {
    $('#results').html('Please wait...');
    var data = $('input[name=twitter-search]').val();
    var request = $.ajax({
      url: '/search.json',
      data: {
        q: data,
        location: get_geo()
      },
      type: 'POST',
      dataType: 'html'
    });
    request.done(function(result) {
      $('#results').html(result);
    });
    return false;
  });
